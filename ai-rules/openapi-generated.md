---
description: Guardrails for OpenAPI-generated & spec files (Swift projects)
globs: []
alwaysApply: true
---
# OpenAPI Generated Code & Spec Guardrails

<objective>
Agents MUST NEVER modify OpenAPI-generated Swift sources or OpenAPI YAML specs.
When changes seem necessary, propose safe extension points or a migration plan
without touching generated artifacts.
</objective>

<cognitive_triggers>
Keywords: OpenAPI, swift-openapi-generator, generated code, DerivedData,
.build, codegen, DTO, Components.Schemas, YAML spec, openapi.yaml
</cognitive_triggers>

## CRITICAL RULES

### Rule 1: Do-Not-Touch Zones
**NEVER** edit files that are:
- Generated by `swift-openapi-generator`
- Located under typical generation paths:
  - `Sources/**/Generated/**`
  - `.build/**`
  - `DerivedData/**`
  - `**/OpenAPI/Generated/**`
- The OpenAPI spec(s): `openapi.yaml`, `openapi.yml`, `**/openapi/*.yaml`

### Rule 2: Analysis-Only
**ALWAYS** analyze, **NEVER** change:
- If asked to “analyze only,” do not offer diffs for the YAML or generated files.
- Provide findings + actionable recommendations for where to apply changes safely.

### Rule 3: Safe Change Targets
**ALWAYS** direct code changes to:
- Hand-written modules (e.g., `ApiClient`, `ApiServer`, `ApiShared`)
- Adapters, mappers, and extensions in non-generated targets
- Dependency-injected services and repositories
- Separate `Docs/` note or `Proposals/` file for spec-change suggestions

### Rule 4: Change Requests to Specs
If a spec change is unavoidable:
- Produce a **proposal** file (e.g., `Docs/OpenAPI-Proposals/2025-xx-xx-what-why.md`)
- Include: motivation, example payloads, migration steps
- Do **NOT** modify the YAML inline

## DECISION TREE